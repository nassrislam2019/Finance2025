<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>دفتر حساباتي</title>
<meta name="theme-color" content="#0b1220" />

<!-- Manifest (مسارات نسبية لتجنب مشاكل GitHub Pages بمسارات فرعية) -->
<link rel="manifest" href="./manifest.json">

<!-- Favicons / PWA icons (fallbacks) -->
<link rel="icon" type="image/png" sizes="192x192" href="./icons/icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="./icons/icon-512.png">
<link rel="apple-touch-icon" href="./icons/icon-512.png">

<!-- Fonts (يمكن استبدالها بتحميل محلي لاحقًا) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap" rel="stylesheet">

<style>
/* ===== الثيمات (Theme Variables) ===== */
:root{
  /* Dark Mode Default */
  --bg:#0b1220;
  --card:#0f172a;
  --muted:#94a3b8;
  --txt:#e5e7eb;
  --brand:#0369a1;
  --brand-2:#0ea5e9;
  --danger:#ef4444;
  --warn:#f59e0b;
  --ok:#22c55e;
  --border:#1f2a44;
  --field-bg:#0b1220;
}
body[data-theme="light"]{
  --bg:#f8fafc;
  --card:#ffffff;
  --muted:#64748b;
  --txt:#1e293b;
  --brand:#1076b9;
  --brand-2:#1493e8;
  --danger:#ef4444;
  --warn:#f59e0b;
  --ok:#16a34a;
  --border:#e2e8f0;
  --field-bg:#f1f5f9;
  --shadow:0 8px 24px rgba(2,6,23,0.1);
}
:root{
  --radius:12px;
  --field-h:42px;
  --shadow:0 8px 24px rgba(2,6,23,0.5);
}

/* خطوط */
body,h1,h2,h3,h4,h5,h6,p,div,span,li,a,button{font-family:"Cairo",sans-serif !important;}
*{box-sizing:border-box}
html{height:100%}
body{
  margin:0;
  padding-bottom:60px; /* مسافة لشريط التنقل السفلي */
  background:var(--bg);
  color:var(--txt);
  min-height:100vh;
  transition:background .3s;
}
.container{max-width:1180px;margin-inline:auto;padding:20px}

/* Cards */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:0; overflow:hidden; box-shadow:var(--shadow);
  margin-bottom:12px;
}
.card-head{
  display:flex;align-items:center;justify-content:space-between;padding:12px 14px;
  background:linear-gradient(135deg, rgba(3,105,161,var(--grad-opacity,0.55)), rgba(14,165,233,var(--grad-opacity,0.12)));
  border-bottom:1px solid var(--border);
}
body[data-theme="light"] .card-head{
  --grad-opacity:.1;
  background:linear-gradient(135deg, rgba(14,165,233,.1), rgba(3,105,161,.05));
  border-bottom:1px solid var(--border);
}
.card-head h3{margin:0;font-size:18px;color:var(--txt)}
.card-body{padding:14px}

/* Layout */
.grid{display:grid;gap:10px}
.grid-2{grid-template-columns:repeat(2,1fr)}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-4{grid-template-columns:repeat(4,1fr)}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
input,select,textarea{
  width:100%;background:var(--field-bg);color:var(--txt);border:1px solid var(--border);
  border-radius:10px;padding:10px 12px;font-size:14px;outline:none;height:var(--field-h)
}
input[type="date"],input[type="month"]{direction:ltr;text-align:center;font-variant-numeric:tabular-nums}
.checkbox-row{display:flex;align-items:center;gap:8px}
.checkbox-row input[type="checkbox"]{width:18px;height:18px}

/* Buttons */
.btn{
  appearance:none;border:none;border-radius:10px;padding:8px 10px;font-weight:700;cursor:pointer;
  transition:transform .06s ease, opacity .15s,height .08s ease;font-size:13px;height:36px;
}
.btn:hover{opacity:.95;transform:translateY(-1px)}
.btn-outline{background:transparent;border:1px solid var(--border);color:var(--muted);padding:8px 10px}
.btn-primary{background:linear-gradient(135deg,#0ea5e9,#0369a1);color:#fff;border:1px solid rgba(14,165,233,.35)}
.btn-danger{background:linear-gradient(180deg,#ef4444,#d02626);color:#fff;border:1px solid rgba(235,75,75,0.15)}
.btn-muted{background:transparent;color:var(--muted);border:1px dashed var(--border);padding:8px 10px}

/* action buttons داخل الجداول — حجم أصغر */
.actions .btn{height:30px;padding:6px 8px;font-size:13px;border-radius:8px}
.actions .btn-outline{border-color:var(--border);color:var(--txt)}

/* Stats (ملخص الحسابات) */
.stats{display:grid;gap:10px}
@media(min-width:720px){.stats{grid-template-columns:repeat(6,1fr)}}
.stat{
  background:var(--field-bg);border:1px solid var(--border);border-radius:var(--radius);padding:14px; text-align:center;
  box-shadow:var(--shadow)
}
.stat small{color:var(--muted)}
.stat .num{font-weight:800;font-size:22px;margin-top:4px;color:var(--txt)}
.pos{color:var(--ok)}.neg{color:var(--danger)}

/* perAccount */
.list-plain{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.list-plain .item{
  background:var(--field-bg);border:1px solid var(--border);padding:14px;border-radius:var(--radius);
  text-align:center;box-shadow:var(--shadow);font-weight:700;color:var(--txt)
}

/* Reports & Tables */
#catsTableWrap table, #tbodyCommit table, #tbodyCollect table {
  border-spacing:0;margin-top:8px
}
#catsTableWrap tbody tr:hover{transform:none;box-shadow:none}
#catsTableWrap tbody td{padding:8px 10px;border:none;border-bottom:1px solid var(--border);}
/* Rest of CSS unchanged... (for brevity in this snippet you can keep the rest identical to your original file) */
.hr{height:1px;background:var(--border);opacity:.7;margin:12px 0;border-radius:999px}
.transfer-grid{display:grid;gap:10px;grid-template-columns:repeat(3,1fr)}
.transfer-grid .full{grid-column:1/-1}
@media(max-width:900px){.transfer-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:720px){
  .grid-2{grid-template-columns:1fr}
  .grid-4{grid-template-columns:1fr 1fr}
  .badge{height:auto}
  .card-head h3{font-size:17px}
  .transfer-grid{grid-template-columns:1fr}
}
.footer-nav{
  position:fixed;bottom:0;right:0;left:0;
  height:56px;padding:0;
  background:var(--card);border-top:1px solid var(--border);
  display:flex;justify-content:space-around;
  z-index:1000;box-shadow:0 -4px 12px rgba(0,0,0,var(--shadow-op,0.4));
}
body[data-theme="light"] .footer-nav{--shadow-op:0.15;}
.footer-nav button{
  flex:1;appearance:none;border:none;background:transparent;
  color:var(--muted);font-size:11px;font-weight:600;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:2px;cursor:pointer;
  transition:color .2s;padding:4px 0;
}
.footer-nav button.active{
  color:var(--brand-2);
}
.footer-nav button i{font-size:18px}
.screen{display:none;margin-top:12px}
.screen.active{display:block}
#themeToggle{
  position:fixed;top:10px;right:10px;z-index:1001;
  width:40px;height:40px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:var(--card);border:1px solid var(--border);
  color:var(--txt);cursor:pointer;
}
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
</head>
<body data-theme="dark">
<div class="container">
  <header>
    <div class="title" style="font-weight:900;font-size:22px;color:var(--txt)">دفتر حساباتي</div>
    <div class="toolbar" style="margin-top:10px">
      <button id="exportJson" class="btn btn-outline" type="button">تصدير JSON</button>
      <button id="exportCsv" class="btn btn-outline" type="button">تصدير CSV</button>
      <label class="btn btn-muted" for="importFile">استيراد JSON<input id="importFile" type="file" accept="application/json" style="display:none"></label>
      <button id="syncNow" class="btn btn-outline" type="button">مزامنة الآن</button>
      <button id="installBtn" class="btn btn-outline" type="button" style="display:none">تثبيت التطبيق</button>
    </div>
  </header>

  <button id="themeToggle" type="button">
    <i class="fas fa-sun"></i>
  </button>

  <!-- المحتوى (احتفظت بكامل الـ HTML الداخلي كما في ملفك الأصلي) -->
  <!-- ... (اِحفظ باقي محتوى index.html كما أرسلته سابقًا — بما في ذلك كل الشاشات والـ script) ... -->

</div>

<nav class="footer-nav nav-tabs">
  <button data-screen="screen-overview" class="active" type="button" onclick="showScreen('screen-overview')">
    <i class="fas fa-chart-pie"></i> ملخص
  </button>
  <button data-screen="screen-txs" type="button" onclick="showScreen('screen-txs')">
    <i class="fas fa-exchange-alt"></i> حركات
  </button>
  <button data-screen="screen-commitments" type="button" onclick="showScreen('screen-commitments')">
    <i class="fas fa-handshake"></i> التزامات
  </button>
  <button data-screen="screen-accounts" type="button" onclick="showScreen('screen-accounts')">
    <i class="fas fa-wallet"></i> حسابات
  </button>
  <button data-screen="screen-cats" type="button" onclick="showScreen('screen-cats')">
    <i class="fas fa-tags"></i> فئات
  </button>
  <button data-screen="screen-github" type="button" onclick="showScreen('screen-github')">
    <i class="fas fa-cog"></i> إعدادات
  </button>
</nav>

<script>
/* ضمّنت هنا ملاحظة: بقية سكربت JavaScript (الذي أرسلته بالكامل مسبقًا) ضعّه كما هو — لا حاجة لتغيير سوى مسارات الـ manifest/icons وهي مُصحّحة أعلاه. */
/* لأن الرسالة طويلة ولتجنب تكرار، انسخ سكربتك الأصلي كما هو بعد هذا التعليق. */
</script>

<!-- تحميل مكتبة Chart.js عبر CDN (ممكن تبقى كما هي أو تضع نسخة محلية لاحقًا) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
</body>
</html>
